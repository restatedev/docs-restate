---
title: "State"
description: "Store key-value state in Restate."
icon: "database"
---

<StateIntro/>

## List all state keys
To retrieve all keys for which the current Virtual Object has stored state:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#statekeys"} 
const stateKeys = ctx.stateKeys();
```

## Get state value
To read a value by key:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#get"} 
const myString = (await ctx.get<string>("my-string-key")) ?? "my-default";
const myNumber = (await ctx.get<number>("my-number-key")) ?? 0;
```
Returns null if the key doesn't exist.

By default, results are serialized using [JSON](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON). See the [serialization docs](/develop/ts/serialization) to customize this.

## Set state value
To write or update a value:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#set"} 
ctx.set("my-key", "my-new-value");
```

## Clear state key
To delete a specific key:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#clear"} 
ctx.clear("my-key");
```

## Clear all state keys

To remove all stored state for the current Virtual Object:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#clear_all"} 
ctx.clearAll();
```

## Advanced: Eager vs. lazy state loading

Restate supports two modes for loading state in handlers:

### Eager state (default)
- **How it works**: State is automatically sent with the request when invoking a handler
- **Benefits**: State is available immediately when the handler starts executing
- **Behavior**: All reads and writes to state are local to the handler execution
- **Best for**: Small to medium state objects that are frequently accessed

### Lazy state
- **How it works**: State is fetched on-demand via `ctx.get()` calls from the Restate Server
- **Benefits**: Reduces initial request size and memory usage
- **Setup**: Set `enableLazyState` to `true` in the [service or handler configuration](/operate/configuration/services)
- **Best for**: Large state objects that aren't needed in every handler execution
