---
title: "State"
description: "Store key-value state in Restate."
icon: "database"
---

import StateIntro from '/snippets/sdk/state-intro.mdx';
import StateLazy from '/snippets/sdk/state-lazy.mdx';

<StateIntro/>

## List all state keys
To retrieve all keys for which the current Virtual Object has stored state:

<CodeGroup>
```java Java {"CODE_LOAD::java/src/main/java/develop/State.java#statekeys"} 
Collection<String> keys = ctx.stateKeys();
```
```kotlin Kotlin {"CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#statekeys"} 
val keys = ctx.stateKeys()
```
</CodeGroup>

## Get state value
To read a value by key.

<CodeGroup>
```java Java {"CODE_LOAD::java/src/main/java/develop/State.java#get"} 
// Getting String value
StateKey<String> STRING_STATE_KEY = StateKey.of("my-key", String.class);
String stringState = ctx.get(STRING_STATE_KEY).orElse("my-default");

// Getting integer value
StateKey<Integer> INT_STATE_KEY = StateKey.of("my-key", Integer.class);
int intState = ctx.get(INT_STATE_KEY).orElse(0);
```
```kotlin Kotlin {"CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#get"} 
// Getting String value
val STRING_STATE_KEY = stateKey<String>("my-key")
val stringState: String? = ctx.get(STRING_STATE_KEY)

// Getting integer value
val INT_STATE_KEY = stateKey<Int>("my-key")
val intState: Int? = ctx.get(INT_STATE_KEY)
```
</CodeGroup>
Returns null if the key doesn't exist.
By default, results are serialized using [JSON](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON). See the [serialization docs](/develop/java/serialization) to customize this.

## Set state value
To write or update a value:

<CodeGroup>
```java Java {"CODE_LOAD::java/src/main/java/develop/State.java#set"} 
StateKey<String> STRING_STATE_KEY = StateKey.of("my-key", String.class);
ctx.set(STRING_STATE_KEY, "my-new-value");
```
```kotlin Kotlin {"CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#set"} 
val STRING_STATE_KEY = stateKey<String>("my-key")
ctx.set(STRING_STATE_KEY, "my-new-value")
```
</CodeGroup>

## Clear state key
To delete a specific key:

<CodeGroup>
```java Java {"CODE_LOAD::java/src/main/java/develop/State.java#clear"} 
StateKey<String> STRING_STATE_KEY = StateKey.of("my-key", String.class);
ctx.clear(STRING_STATE_KEY);
```
```kotlin Kotlin {"CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#clear"} 
val STRING_STATE_KEY = stateKey<String>("my-key")
ctx.clear(STRING_STATE_KEY)
```
</CodeGroup>

## Clear all state keys

To remove all stored state for the current Virtual Object:

<CodeGroup>
```java Java {"CODE_LOAD::java/src/main/java/develop/State.java#clear_all"} 
ctx.clearAll();
```
```kotlin Kotlin {"CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#clear_all"} 
ctx.clearAll()
```
</CodeGroup>

<StateLazy/>
