---
title: "State"
description: "Store key-value state in Restate."
icon: "database"
---

import StateIntro from '/snippets/sdk/state-intro.mdx';
import StateLazy from '/snippets/sdk/state-lazy.mdx';

<StateIntro/>

## List all state keys
To retrieve all keys for which the current Virtual Object has stored state:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#statekeys"} 
const stateKeys = ctx.stateKeys();
```

## Get state value
To read a value by key:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#get"} 
const myString = (await ctx.get<string>("my-string-key")) ?? "my-default";
const myNumber = (await ctx.get<number>("my-number-key")) ?? 0;
```
Returns null if the key doesn't exist.

See the [serialization docs](/develop/java/serialization) to customize the state serializer.

## Set state value
To write or update a value:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#set"} 
ctx.set("my-key", "my-new-value");
```

## Clear state key
To delete a specific key:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#clear"} 
ctx.clear("my-key");
```

## Clear all state keys

To remove all stored state for the current Virtual Object:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#clear_all"} 
ctx.clearAll();
```

<StateLazy/>

## Advanced: Typed State

You can specify the types of your Object's K/V state, to ensure type safety and better developer experience:

```typescript {"CODE_LOAD::ts/src/develop/state.ts#typed_state"} 
type GreeterContext = restate.ObjectContext<{
  name: string;
  count: number;
}>;

export const greeter = restate.object({
  name: "Greeter",
  handlers: {
    greet: async (ctx: GreeterContext, name: string) => {
      const count: number = (await ctx.get("count")) ?? 0;
      ctx.set("name", name);
    },
  },
});
```