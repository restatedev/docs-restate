---
title: "Local Restate Cluster with Docker"
description: "Learn how to deploy a Restate cluster using Docker Compose."
tags: ["deployment"]
---

import DockerComposeCluster from '/snippets/common/docker-compose-cluster.mdx';


This guide shows how to deploy a distributed Restate cluster consisting of three nodes using Docker and Docker compose.

<Info title="Prerequisites">
    - [Docker](https://docs.docker.com/get-started/get-docker/)
    - [Docker Compose](https://docs.docker.com/compose/install/)
</Info>

<Steps>
<Step title="Deploy the Restate cluster using Docker">
    <DockerComposeCluster/>
</Step>

<Step title="Check the cluster status">
    You can check the status of the cluster by running the `restatectl status` command on any of the started Restate servers.
    Note, it might take a few seconds until the cluster has fully started and the status is available.

    ```shell
    docker compose exec restate-1 restatectl status
    ```
</Step>

<Step title={"Start a local Restate service"}>
    Follow the [Quickstart guide](/quickstart) to create a simple Restate service.
</Step>

<Step title="Register the service endpoint">
    You can register the service endpoint at any of the started Restate nodes since they all run the `admin` role.

    ```shell
    restate dp register http://host.docker.internal:9080
    ```

    Or alternatively you can open the Restate UI at http://localhost:9080 and register the service endpoint there.
    </Step>

<Step title="Invoke the service">
    You can invoke the registered service at any of the started Restate nodes since they all run the ingress.

    ```shell
    curl localhost:8080/Greeter/greet --json '"Sarah"' &&
    curl localhost:28080/Greeter/greet --json '"Bob"' &&
    curl localhost:38080/Greeter/greet --json '"Eve"'
    ```
</Step>

<Step title="Kill and restart Restate servers">
    Try killing and restarting one of the Restate nodes and see how the cluster reacts.
    ```shell
    docker compose kill restate-1 &&
    sleep 5 &&
    docker compose up -d restate-1
    ```
</Step>

<Step title="Create snapshots">
    Try instructing the partition processors to create a snapshot of their state in the object store bucket:
    ```shell
    docker compose exec restate-1 restatectl snapshot create
    ```
    Navigate to the Minio console at [http://localhost:9000](http://localhost:9000) and browse the bucket contents (default credentials: `minioadmin`/`minioadmin`).
</Step>
<Step title="ðŸŽ‰Congratulations, you managed to run your first distributed Restate cluster and simulated some failures!"/>
</Steps>

Here are some next steps for you to try:

- Try to configure a 5-node Restate cluster that can tolerate up to two node failures.
- Trim the logs (either manually, or by setting up automatic trimming) _before_ adding more nodes.
- Try to deploy a 3-node Restate cluster using Kubernetes.
