---
title: "Service Configuration"
sidebarTitle: "Configuration"
icon: "sliders-simple"
description: "Configure service-level behavior like timeouts, idempotency retention, and privacy."
---

Restate services support several configuration options to adapt their behavior for different use cases. These include timeout settings, retention policies, and privacy controls.

## **Programmatic Configuration**
It is recommended to configure services directly in your code, using the SDKs.

### Service-level configuration

To configure your services:

<CodeGroup>
```ts TypeScript {"CODE_LOAD::ts/src/services/configuration/my_advanced_service.ts#options"} 
// Add service options to the service definition
const myWorkflow = restate.workflow({
  name: "MyWorkflow",
  handlers: {
    run: async (ctx: restate.Context) => {},
  },
  options: {
    abortTimeout: { minutes: 15 },
    inactivityTimeout: { minutes: 15 },
    idempotencyRetention: { days: 3 },
    workflowRetention: { days: 3 }, // only for workflows
    journalRetention: { days: 7 },
    ingressPrivate: true,
    enableLazyState: true, // only for Virtual Objects and Workflows
  },
});
```
```java Java {"CODE_LOAD::java/src/main/java/services/configuration/MyWorkflow.java#options"} 
// Specify service options when binding them to an endpoint
RestateHttpServer.listen(
  Endpoint.bind(
    new MyWorkflow(),
    conf -> conf.abortTimeout(Duration.ofMinutes(15))
        .inactivityTimeout(Duration.ofMinutes(15))
        .idempotencyRetention(Duration.ofDays(3))
        .workflowRetention(Duration.ofDays(10)) // Only for workflows
        .journalRetention(Duration.ofDays(7))
        .ingressPrivate(true)
        .enableLazyState(true)
  )
);
```

```python Python {"CODE_LOAD::python/src/services/configuration.py#options"} 
# Specify service options when you create them
my_workflow = restate.Workflow(
    "MyWorkflow",
    inactivity_timeout=timedelta(minutes=15),
    abort_timeout=timedelta(minutes=15),
    idempotency_retention=timedelta(days=3),
    journal_retention=timedelta(days=7),
    ingress_private=True,
    enable_lazy_state=True, # only for Objects/Workflows
)
```

```go Go {"CODE_LOAD::go/services/configuration.go#options"} 
// Specify service options when binding them to an endpoint
if err := server.NewRestate().
  Bind(
    restate.Reflect(
      MyWorkflow{},
      restate.WithInactivityTimeout(15*time.Minute),
      restate.WithAbortTimeout(15*time.Minute),
      restate.WithIdempotencyRetention(3*24*time.Hour),
      restate.WithJournalRetention(7*24*time.Hour),
      restate.WithIngressPrivate(true),
      restate.WithEnableLazyState(true),
      restate.WithWorkflowRetention(10*24*time.Hour), // Only for workflows
    ),
  ).
  Start(context.Background(), "0.0.0.0:9080"); err != nil {
  log.Fatal(err)
}
```
</CodeGroup>


### Handler-level configuration

To set configuration at the handler level:

<CodeGroup>
```ts TypeScript {"CODE_LOAD::ts/src/services/configuration/my_advanced_service.ts#handleropts"} 
// Add handler options to the handler definition
// For services:
const myService = restate.service({
  name: "MyService",
  handlers: {
    myHandler: restate.handlers.handler(
      {
        abortTimeout: { minutes: 15 },
        inactivityTimeout: { minutes: 15 },
        idempotencyRetention: { days: 3 },
        journalRetention: { days: 7 },
        ingressPrivate: true,
      },
      async (ctx: restate.Context) => {}
    ),
  },
});

// For Virtual Objects:
const myObject = restate.object({
  name: "MyObject",
  handlers: {
    myHandler: restate.handlers.object.exclusive(
      {
        abortTimeout: { minutes: 15 },
        inactivityTimeout: { minutes: 15 },
        idempotencyRetention: { days: 3 },
        journalRetention: { days: 7 },
        ingressPrivate: true,
        enableLazyState: true,
      },
      async (ctx: restate.ObjectContext) => {}
    ),
    mySharedHandler: restate.handlers.object.shared(
      {
        /*... my options ...*/
      },
      async (ctx: restate.ObjectSharedContext) => {}
    ),
  },
});

// For Workflows:
const myWf = restate.workflow({
  name: "MyWf",
  handlers: {
    run: restate.handlers.workflow.workflow(
      {
        abortTimeout: { minutes: 15 },
        inactivityTimeout: { minutes: 15 },
        journalRetention: { days: 7 },
        ingressPrivate: true,
        enableLazyState: true,
      },
      async (ctx: restate.WorkflowContext) => {}
    ),
    signal: restate.handlers.workflow.shared(
      {
        /*... my options ...*/
      },
      async (ctx: restate.WorkflowSharedContext) => {}
    ),
  },
});
````
```java Java {"CODE_LOAD::java/src/main/java/services/configuration/MyWorkflow.java#handleropts"} 
// Or specify handler options when binding their service to an endpoint
RestateHttpServer.listen(
  Endpoint.bind(
    new MyWorkflow(),
    conf ->
      conf.configureHandler("run", handlerConf ->
        handlerConf.abortTimeout(Duration.ofMinutes(15))
          .inactivityTimeout(Duration.ofMinutes(15))
          .journalRetention(Duration.ofDays(7))
          .ingressPrivate(true)
          .enableLazyState(true)
      )
    )
);
```

```python Python {"CODE_LOAD::python/src/services/configuration.py#handleropts"} 
# Specify handler options via the decorator
@my_workflow.main(
    inactivity_timeout=timedelta(minutes=15),
    abort_timeout=timedelta(minutes=15),
    workflow_retention=timedelta(days=3),
    # -> or idempotency_retention for Services/Objects
    journal_retention=timedelta(days=7),
    ingress_private=True,
    enable_lazy_state=True, # only for Objects/Workflows
)
async def run(ctx: restate.WorkflowContext, req: str) -> str:
    # ... implement workflow logic here ---
    return "success"
```
</CodeGroup>

## **Temporary override**
You can temporarily override the configurable options via the UI or CLI, until the revision of a service is registered.

### 1. **Via the UI**
Use the [Restate UI](/installation#restate-ui) to configure services interactively:
- Navigate to your registered deployment
- Click on the service you want to configure
- Modify settings through the web interface

### 2. **Via the CLI**
Use the Restate CLI to edit configuration files:
```bash
restate services config edit <SERVICE_NAME>
```

## Configuration options

<AccordionGroup>
  <Accordion title="Inactivity timeout">

    The maximum time Restate waits for new journal entries from a service before Restate considers it stalled.
    After this timeout, Restate will ask the service to suspend.

    **Default**: 1 minute

    **When to adjust:** For long-running operations like LLM calls, long-running tasks, or external API calls that take longer than the default timeout.
  </Accordion>

  <Accordion title="Abort timeout">
    Once the inactivity timeout is reached, Restate will wait for the abort timeout before interrupting the user code.
    So this is the maximum time Restate will wait for a service to suspend before it forcibly aborts the execution.

    **Default:** 1 minute

    **Example:** For AI agents that might take 3-5 minutes to respond, set both timeouts to accommodate the expected duration.
  </Accordion>

  <Accordion title="Idempotency retention">
    How long Restate retains idempotency keys to prevent duplicate request processing.

    You can see the status of the completed invocation in the UI.

    **Default:** 24 hours

    **When to adjust:** For services that need longer idempotency windows, such as financial transactions or critical business operations.
  </Accordion>

<Accordion title="Workflow retention">
    The workflow retention describes for how long you will be able to call the shared handlers on a workflow after the run handler has finished.
    The retention time starts counting down from the moment the run handler completes.

    After this time, the workflow's K/V state is cleared, you cannot call any shared handlers anymore, and any [Durable Promises](/develop/ts/external-events#durable-promises) are discarded.

    **Default:** 24 hours

    **When to adjust:** For workflows that need longer retention windows, to retrieve state or the result of a [Durable Promise](/develop/ts/external-events#durable-promises).
</Accordion>

<Accordion title="Journal retention">
    How long Restate keeps invocation journals after completion for debugging and auditing.

    Increase to see journals of completed invocations in the log.

    For workflow executions or invocations with idempotency keys:
    - the journal retention is capped by the workflow retention or idempotency retention time
    - If the journal retention is set to 0, you can see completion status but not journal entries.

    **Default:** Discarded immediately after completion
    
    **When to adjust:** For workflows, AI agents, or any service where you need to inspect the execution history after completion.
  </Accordion>

  <Accordion title="Private services">
    Mark services as private to prevent external access while allowing internal service-to-service communication.
    
    **Use cases:**
    - Internal utility services that shouldn't be exposed externally
    - Backend services that only other Restate services should access
    
    **Configuration:** Set `ingressPrivate: true` in service options.
  </Accordion>
</AccordionGroup>



