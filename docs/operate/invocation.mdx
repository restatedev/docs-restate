---
title: "Managing Invocations"
description: "Learn how to invoke, monitor, and manage Restate services."
icon: "comment-exclamation"
---

An invocation is a request to execute a service handler. You can invoke handlers through:

- [HTTP requests](/invoke/http)
- [SDK clients](/invoke/clients) 
- [Kafka events](/invoke/kafka)

Each invocation receives a unique identifier that you can use to monitor, cancel, or kill it.

## Invocation ID

Restate assigns every invocation a unique **Invocation ID** starting with `inv_`. You can find this ID in:

- The [Restate UI](/develop/local_dev#restate-ui)
- Logs and traces (`restate.invocation.id`)
- CLI output

List all invocations to see their IDs:

```shell
restate invocations list
```

**Example output:**
```shell
‚ùØ [2024-04-16 15:28:20.237 +02:00] inv_1aiqX0vFEFNH0TF1pLRFBDFosQCCTAN1M5 [CartObject @ Mary]::addTicket
Status:      backing-off  (4 minutes, 42 seconds and 653 ms. Retried 32 time(s). Next retry in 9 seconds and 469 ms)
Deployment:  dp_14LsPzGz9HBxXIeBoH5wYUh [required]
Error:       [2024-04-16 15:33:01.930 +02:00] [500] Failing

Showing 1/1 invocations. Query took 86.295361ms
```

## Canceling Invocations

Cancel an invocation when it takes too long or is no longer needed. Cancellation:

- Frees held resources
- Rolls back any changes made so far
- Allows proper cleanup

### Cancel by Invocation ID

Use the UI, CLI, or [Admin API](/category/admin-api):

<CodeGroup>
    ```shell CLI
    restate invocations cancel inv_1gdJBtdVEcM942bjcDmb1c1khoaJe11Hbz
    ```
    ```shell curl
    curl -X DELETE http://localhost:9070/invocations/inv_1gdJBtdVEcM942bjcDmb1c1khoaJe11Hbz
    ```
</CodeGroup>

### Cancel in Bulk

Cancel multiple invocations by specifying service and handler patterns:

- `serviceName` or `serviceName/handler`
- `virtualObjectName` or `virtualObjectName/key` or `virtualObjectName/key/handler`
- `workflowName` or `workflowName/key` or `workflowName/key/handler`

**Example:** Cancel all `CartObject/add` invocations:
```shell
restate invocations cancel CartObject/add
```

<Note title="Rollback Requirements">
For proper rollback, handlers must include compensation logic to maintain service state consistency. See the [sagas guide](/guides/sagas) for implementation details.
</Note>

<Note title="Non-blocking Operation">
Cancellation is non-blocking. The API call may return before cancellation completes. In rare cases, cancellation may not take effect - retry the operation if needed.
</Note>

<Accordion title="How Cancellation Works">

Cancellation follows a recursive process:

1. **Cancel leaves:** Restate interrupts ongoing sleeps, awakeables, and external service calls
2. **Throw terminal error:** A terminal error is thrown at the current execution point
3. **Run compensation:** The handler executes its compensation logic
4. **Propagate response:** The response propagates back through the call tree, continuing the cancellation process

</Accordion>

## Killing Invocations

Use **kill** when cancellation fails (e.g., when endpoints are permanently unavailable).

<Warning title="Inconsistent State Risk">
Killing immediately stops all calls in the invocation tree **without executing compensation logic**. This may leave your service in an inconsistent state. Only use as a last resort after trying other fixes.
</Warning>

### Kill by Invocation ID

<CodeGroup>
    ```shell CLI
    restate invocations cancel --kill inv_1gdJBtdVEcM942bjcDmb1c1khoaJe11Hbz
    ```
    ```shell curl
    curl -X DELETE http://localhost:9070/invocations/inv_1gdJBtdVEcM942bjcDmb1c1khoaJe11Hbz?mode=kill
    ```
</CodeGroup>

### Kill in Bulk

Like cancellation, you can kill multiple invocations using service/handler patterns.

<Note title="One-way and Delayed Calls">
One-way calls and delayed calls are not killed because they're detached from the originating call tree.
</Note>

## Managing Kafka Subscriptions

Restate can trigger handlers via Kafka events.

### Create Subscriptions

Subscribe a handler to a Kafka topic:

```bash
curl localhost:9070/subscriptions --json '{
    "source": "kafka://my-cluster/my-topic",
    "sink": "service://MyService/Handle",
    "options": {"auto.offset.reset": "earliest"}
}'
```

The `options` field is optional and accepts any [librdkafka configuration](https://github.com/confluentinc/librdkafka/blob/master/CONFIGURATION.md) parameter.

### List Subscriptions

View current subscriptions:

```bash
curl localhost:9070/subscriptions
```

**Example response:**
```json
{
    "subscriptions": [
        {
            "id": "sub_11XHoawrCiWtv8kzhEyGtsR",
            "source": "kafka://my-cluster/my-topic",
            "sink": "service://Greeter/greet",
            "options": {
                "auto.offset.reset": "earliest",
                "client.id": "restate",
                "group.id": "sub_11XHoawrCiWtv8kzhEyGtsR"
            }
        }
    ]
}
```

### Delete Subscriptions

Remove a subscription using its ID (starts with `sub_`):

```bash
curl -X DELETE localhost:9070/subscriptions/sub_11XHoawrCiWtv8kzhEyGtsR
```

<Note title="Message Processing">
When you delete a subscription, Restate stops the associated consumer group. Messages already enqueued by Restate will still be processed.
</Note>
