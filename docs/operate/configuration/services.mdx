---
title: "Service Configuration"
sidebarTitle: "Configuration"
icon: "sliders-simple"
description: "Configure service-level behavior like timeouts, idempotency retention, and privacy."
---

Restate services support several configuration options to adapt their behavior for different use cases. These include timeout settings, retention policies, and privacy controls.

## Configuration methods

You can configure services using multiple approaches:

### 1. **Programmatic Configuration**
Configure services directly in your code when defining them.

#### Service-level configuration

To configure your services:

```ts {"CODE_LOAD::ts/src/develop/my_advanced_service.ts#options"} 
restate.workflow({
  name: "MyWorkflow",
  handlers: {
    run: async (ctx: restate.Context) => {},
  },
  options: {
    abortTimeout: { minutes: 15 },
    inactivityTimeout: { minutes: 15 },
    idempotencyRetention: { days: 3 },
    journalRetention: { days: 7 },
    ingressPrivate: true,
    enableLazyState: true, // only for Virtual Objects and Workflows
    workflowRetention: { days: 3 }, // only for workflows
  },
});
```

#### Handler-level configuration

To set configuration at the handler level:

<CodeGroup>
```ts service {"CODE_LOAD::ts/src/develop/my_advanced_service.ts#handleropts_service"}
restate.service({
  name: "MyService",
  handlers: {
    myHandler: restate.handlers.handler(
      {
        abortTimeout: { minutes: 15 },
        inactivityTimeout: { minutes: 15 },
        idempotencyRetention: { days: 3 },
        journalRetention: { days: 7 },
        ingressPrivate: true,
      },
      async (ctx: restate.Context) => {}
    ),
  },
});
````
```ts virtual_object {"CODE_LOAD::ts/src/develop/my_advanced_service.ts#handleropts_object"}
restate.object({
  name: "MyService",
  handlers: {
    myHandler: restate.handlers.object.exclusive(
      {
        abortTimeout: { minutes: 15 },
        inactivityTimeout: { minutes: 15 },
        idempotencyRetention: { days: 3 },
        journalRetention: { days: 7 },
        ingressPrivate: true,
        enableLazyState: true,
      },
      async (ctx: restate.Context) => {}
    ),
    mySharedHandler: restate.handlers.object.shared(
      {
        /*... my options ...*/
      },
      async (ctx: restate.Context) => {}
    ),
  },
});
```
```ts workflow {"CODE_LOAD::ts/src/develop/my_advanced_service.ts#handleropts_workflow"}
restate.workflow({
  name: "MyWorkflow",
  handlers: {
    run: restate.handlers.workflow.workflow(
      {
        abortTimeout: { minutes: 15 },
        inactivityTimeout: { minutes: 15 },
        idempotencyRetention: { days: 3 },
        journalRetention: { days: 7 },
        ingressPrivate: true,
        enableLazyState: true,
      },
      async (ctx: restate.Context) => {}
    ),
    signal: restate.handlers.workflow.shared(
      {
        /*... my options ...*/
      },
      async (ctx: restate.Context) => {}
    ),
  },
});
```
</CodeGroup>

### 2. **Via the UI**
Use the [Restate UI](/develop/local_dev#restate-ui) to configure services interactively:
- Navigate to your registered deployment
- Click on the service you want to configure
- Modify settings through the web interface

### 3. **Via the CLI**
Use the Restate CLI to edit configuration files:
```bash
restate services config edit <SERVICE_NAME>
```

## Configuration options

<AccordionGroup>
  <Accordion title="Timeout settings">

    #### Inactivity timeout
    The maximum time Restate waits for new journal entries from a service before Restate considers it stalled.
    After this timeout, Restate will ask the service to suspend.

    **Default**: 1 minute

    **When to adjust:** For long-running operations like LLM calls, long-running tasks, or external API calls that take longer than the default timeout.

    #### Abort timeout
    Once the inactivity timeout is reached, Restate will wait for the abort timeout before interrupting the user code.
    So this is the maximum time Restate will wait for a service to suspend before it forcibly aborts the execution.

    **Default:** 1 minute

    **Example:** For AI agents that might take 3-5 minutes to respond, set both timeouts to accommodate the expected duration.
  </Accordion>

  <Accordion title="Retention policies">
    #### Idempotency retention
    How long Restate retains idempotency keys to prevent duplicate request processing.

    You can see the status of the completed invocation in the UI.

    **Default:** 24 hours

    **When to adjust:** For services that need longer idempotency windows, such as financial transactions or critical business operations.

    #### Workflow retention
    The workflow retention describes for how long you will be able to call the shared handlers on a workflow after the run handler has finished.
    The retention time starts counting down from the moment the run handler completes.

    After this time, the workflow's K/V state is cleared, you cannot call any shared handlers anymore, and any [Durable Promises](/develop/ts/awakeables#durable-promises) are discarded.

    **Default:** 24 hours

    **When to adjust:** For workflows that need longer retention windows, to retrieve state or the result of a [Durable Promise](/develop/ts/awakeables#durable-promises).
    
    #### Journal retention
    How long Restate keeps invocation journals after completion for debugging and auditing.

    Increase to see journals of completed invocations in the log.

    For workflow executions or invocations with idempotency keys:
    - the journal retention is capped by the workflow retention or idempotency retention time
    - If the journal retention is set to 0, you can see completion status but not journal entries.

    **Default:** Discarded immediately after completion
    
    **When to adjust:** For workflows, AI agents, or any service where you need to inspect the execution history after completion.
  </Accordion>

  <Accordion title="Privacy and access control">
    #### Private services
    Mark services as private to prevent external access while allowing internal service-to-service communication.
    
    **Use cases:**
    - Internal utility services that shouldn't be exposed externally
    - Backend services that only other Restate services should access
    
    **Configuration:** Set `ingressPrivate: true` in service options.
  </Accordion>

  <Accordion title="Error handling">
    #### Error mapping
    Provide a function to map specific errors to terminal errors, preventing infinite retries.
    
    **Example:** Map validation failures to terminal errors.
    
    See the [error handling docs](/develop/ts/error-handling#mapping-errors-to-terminalerror) for detailed examples.
  </Accordion>
</AccordionGroup>



